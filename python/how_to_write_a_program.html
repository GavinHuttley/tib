<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.40. Pulling it together – writing your own programs &mdash; Topics in Bioinformatics 2022.10.03 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/jupyter-sphinx.css" type="text/css" />
      <link rel="stylesheet" href="../_static/thebelab.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.42. Miscellaneous Python features" href="misc.html" />
    <link rel="prev" title="5.39. Extending capabilities using import" href="import.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Topics in Bioinformatics
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">1. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">2. Prologue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">3. How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notation.html">4. Notation used throughout</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">5. Introduction to Python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="resources.html">5.1. Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html">5.2. Introduction to programming using Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html">5.3. Computing environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#code-and-output-in-these-notes-is-from-jupyter">5.4. Code and output in these notes is from Jupyter</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#everyones-first-program-in-python">5.5. Everyones first program in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#basic-arithmetic-operations">5.6. Basic arithmetic operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#exercises">5.7. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">5.8. Variables and assignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html#exercises">5.9. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="operators.html">5.10. Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="operators.html#exercises">5.11. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">5.12. The basic data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html#exercises">5.13. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="logic.html">5.14. Logical syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="logic.html#exercises">5.15. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="interpreting_errors.html">5.16. Fixing errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="interpreting_errors.html#exercises">5.17. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html">5.18. Functions and methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#exercises">5.19. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="strings.html">5.20. Dealing with strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="strings.html#exercises">5.21. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir_help.html">5.22. Getting help</a></li>
<li class="toctree-l2"><a class="reference internal" href="lists.html">5.23. Using lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="dictionaries.html">5.24. Dealing with dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="sets.html">5.25. The <code class="docutils literal notranslate"><span class="pre">set</span></code> data type</a></li>
<li class="toctree-l2"><a class="reference internal" href="sets.html#exercises">5.26. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="indexing.html">5.27. Indexing and Slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="indexing.html#exercises">5.28. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="files.html">5.29. Working with files</a></li>
<li class="toctree-l2"><a class="reference internal" href="files.html#exercises">5.30. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterators.html">5.31. Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterators.html#exercises">5.32. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_functions.html">5.33. Writing functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_functions.html#exercises">5.34. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace.html">5.35. Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespace.html#exercises">5.36. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="more_looping.html">5.37. More on looping</a></li>
<li class="toctree-l2"><a class="reference internal" href="more_looping.html#exercises">5.38. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="import.html">5.39. Extending capabilities using <code class="docutils literal notranslate"><span class="pre">import</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.40. Pulling it together – writing your own programs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#break-the-problem-into-pieces">5.40.1. Break the problem into pieces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#look-for-patterns">5.40.2. Look for patterns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exercises">5.41. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html">5.42. Miscellaneous Python features</a></li>
<li class="toctree-l2"><a class="reference internal" href="numpy.html">5.43. <code class="docutils literal notranslate"><span class="pre">numpy</span></code> – numerical routines for python</a></li>
<li class="toctree-l2"><a class="reference internal" href="numpy.html#exercises">5.44. Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualisation.html">5.45. Data Visualisation using Plotly</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualisation.html#exercises">5.46. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../seqcomp/index.html">6. Sequence Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../molevol/index.html">7. Molecular Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cogent3/index.html">8. Molecular Evolutionary Analyses Using <code class="docutils literal notranslate"><span class="pre">cogent3</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../statistics/index.html">9. Statistical analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version_control/index.html">10. Introduction to version control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">11. Introduction to Testing in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">12. Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Topics in Bioinformatics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">5. </span>Introduction to Python</a> &raquo;</li>
      <li><span class="section-number">5.40. </span>Pulling it together – writing your own programs</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/GavinHuttley/tib/blob/develop/source/python/how_to_write_a_program.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="pulling-it-together-writing-your-own-programs">
<h1><span class="section-number">5.40. </span>Pulling it together – writing your own programs<a class="headerlink" href="#pulling-it-together-writing-your-own-programs" title="Permalink to this headline"></a></h1>
<div class="section" id="break-the-problem-into-pieces">
<h2><span class="section-number">5.40.1. </span>Break the problem into pieces<a class="headerlink" href="#break-the-problem-into-pieces" title="Permalink to this headline"></a></h2>
<p>While it can seem daunting, the key to writing a program is to break the problem into smaller pieces and solve those individually. How do I recognise what to work on first, how can I decide what a piece is? I suggest thinking in terms of order of operations. To illustrate these steps let’s look at a simple equation.</p>
<div class="math notranslate nohighlight">
\[x=b+\sqrt{b^2 + 4ac}\]</div>
<p>Here’s a listing of the parts:</p>
<ol class="arabic">
<li><p><span class="math notranslate nohighlight">\(b\)</span></p></li>
<li><p>the <span class="math notranslate nohighlight">\(\sqrt{~}\)</span>, which contains</p>
<blockquote>
<div><p>2.1. <span class="math notranslate nohighlight">\(b^2\)</span>, which is</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(b\times b\)</span></p>
</div></blockquote>
<p>2.2. <span class="math notranslate nohighlight">\(4ac\)</span>, which is</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(4\times a \times c\)</span></p>
</div></blockquote>
</div></blockquote>
</li>
</ol>
<p>To actually solve this problem requires we work from the inside (the most indented bullet points) towards the outside (the least indented bullet points). So let’s do this thing!</p>
<p>I’m going to rewrite the bullet list, defining the names of python variables I will use for each level.</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">b</span></code> (well that was easy!)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqrt_term</span></code></p>
<blockquote>
<div><p>2.1. <code class="docutils literal notranslate"><span class="pre">b_sq</span></code></p>
<p>2.2. <code class="docutils literal notranslate"><span class="pre">four_ac</span></code></p>
</div></blockquote>
</li>
</ol>
<p>The first thing we have to do is define the variables we will use before we actually use them. We will just give them some starting numerical values (we know they have to be numbers because maths!) <a class="footnote-reference brackets" href="#id2" id="id1">1</a>.</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Let’s also make our life easy by defining only positive numerical values so we don’t have to worry about handling the <span class="math notranslate nohighlight">\(\sqrt{~}\)</span> of a negative number.</p>
</dd>
</dl>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">1.1</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">32</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>That actually defines <code class="docutils literal notranslate"><span class="pre">b</span></code> (1.), so the first of our parts is solved. Now let’s solve go to the inner most pieces and define <code class="docutils literal notranslate"><span class="pre">b_sq</span></code> (2.1).</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b_sq</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Then <code class="docutils literal notranslate"><span class="pre">four_ac</span></code> (2.2).</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">four_ac</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Now we can compute <code class="docutils literal notranslate"><span class="pre">sqrt_term</span></code> (2.).</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="n">sqrt_term</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">b_sq</span> <span class="o">+</span> <span class="n">four_ac</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>and the final solution (<code class="docutils literal notranslate"><span class="pre">x</span></code>)</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">sqrt_term</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>17.876334882255897
</pre></div>
</div>
</div>
</div>
<p>We can, of course, write this as a single statement.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>17.876334882255897
</pre></div>
</div>
</div>
</div>
<p>Now this is a simple problem. For more challenging problems, as discussed below, breaking problems into pieces and making sure each piece works is a more successful strategy.</p>
</div>
<div class="section" id="look-for-patterns">
<h2><span class="section-number">5.40.2. </span>Look for patterns<a class="headerlink" href="#look-for-patterns" title="Permalink to this headline"></a></h2>
<p>Part of what we have just done is to look at the “problem” (execute an equation) and recognised patterns in it (based on mathematical order of operations). That approach also applies to more complicated challenges.</p>
<p>Let’s say we want to read in a plain text file which contains a header column followed by rows of numbers where fields are delimited by the tab character. Here is the first few lines of just such a file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">length</span>      <span class="n">kappa</span>
<span class="mf">0.017963959082536105</span>        <span class="mf">8.567983199899585</span>
<span class="mf">0.036913880515213056</span>        <span class="mf">7.658395694530731</span>
</pre></div>
</div>
<p>Algorithmically, the top level problems are:</p>
<ol class="arabic">
<li><p>Open the file (see <a class="reference internal" href="files.html#files"><span class="std std-ref">Working with files</span></a>)</p></li>
<li><p>Read the file line by line  (see <a class="reference internal" href="files.html#files"><span class="std std-ref">Working with files</span></a>)</p>
<blockquote>
<div><p>2.1. Transform each line into usable data</p>
</div></blockquote>
</li>
</ol>
<p>That last point is the inner most, so we focus our attention on the challenge of transforming lines. We look at the sample of the file to we identify any patterns and notice 2 features. The first is that all lines have the same number of fields (separated by <code class="docutils literal notranslate"><span class="pre">\t</span></code>). The second is that the header row is different in that the values are not numbers. We now modify the enumeration to give some more detail.</p>
<ol class="arabic">
<li><p>Open the file (see <a class="reference internal" href="files.html#files"><span class="std std-ref">Working with files</span></a>)</p></li>
<li><p>Read the first line in the file</p>
<blockquote>
<div><p>2.1. Split the line into fields</p>
</div></blockquote>
</li>
<li><p>Read the remaining lines in the file (see <a class="reference internal" href="files.html#files"><span class="std std-ref">Working with files</span></a>)</p>
<blockquote>
<div><p>3.1. Split a line into fields</p>
<blockquote>
<div><p>3.1.1. Convert the line items into <code class="docutils literal notranslate"><span class="pre">float</span></code>’s</p>
</div></blockquote>
</div></blockquote>
</li>
<li><p>Close the file (see <a class="reference internal" href="files.html#files"><span class="std std-ref">Working with files</span></a>)</p></li>
</ol>
<p>So I suggest the place to start is 3.1.1. I’m going to write separate functions for each of these steps. The reason being that it allows us to reuse code <a class="footnote-reference brackets" href="#id4" id="id3">2</a>, makes checking the code correctness easier and simplifies building more complex algorithms into being just the inclusion of already written functions.</p>
<dl class="footnote brackets">
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>Important here since 2.1 and 3.1 are the same. Using a function means we only have to write it once and we can use it as many times as seems appropriate.</p>
</dd>
</dl>
<p>We start this program with a function that takes a list of strings where every value needs to be converted into a <code class="docutils literal notranslate"><span class="pre">float</span></code>. I’m going to write it and test it, using an <code class="docutils literal notranslate"><span class="pre">assert</span></code>, with some sample data.</p>
<div class="jupyter_cell jupyter_container docutils container" id="index-0">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cast_to_floats</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;turns a series of strings into floats&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;0.0&quot;</span><span class="p">,</span> <span class="s2">&quot;24.3&quot;</span><span class="p">,</span> <span class="s2">&quot;13.5&quot;</span><span class="p">]</span>
<span class="n">got</span> <span class="o">=</span> <span class="n">cast_to_floats</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">got</span> <span class="o">==</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">24.3</span><span class="p">,</span> <span class="mf">13.5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Yay! So that’s 3.1.1 out of the way. The next step out is solve 3.1. We also do this by writing a separate function that we check using some synthetic data and make sure it gives us the result we expect.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">line_to_fields</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;splits at \t and cleans up the elements&quot;&quot;&quot;</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># I think we should remove any leading / trailing white space from elements</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="c1"># this sample is \t delimited with a \n character at the end</span>
<span class="c1"># just as it would be if read from a file</span>
<span class="n">sample</span> <span class="o">=</span> <span class="s2">&quot;0.0</span><span class="se">\t</span><span class="s2">24.3</span><span class="se">\t</span><span class="s2">13.5</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">got</span> <span class="o">=</span> <span class="n">line_to_fields</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">got</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;0.0&quot;</span><span class="p">,</span> <span class="s2">&quot;24.3&quot;</span><span class="p">,</span> <span class="s2">&quot;13.5&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Double Yay! That’s 3.1 (and thus 2.1) out of the way <a class="footnote-reference brackets" href="#id6" id="id5">3</a>.</p>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id5">3</a></span></dt>
<dd><p>Also note this code will work if a line has 1 field, or 1 million fields.</p>
</dd>
</dl>
<p>Returning to the task list, we remove the steps we’ve already done, making it simpler to see what remains.</p>
<ol class="arabic simple">
<li><p>Open the file</p></li>
<li><p>Read the first line in the file</p></li>
<li><p>Read the remaining lines in the file</p></li>
<li><p>Close the file</p></li>
</ol>
<p>The first and last are easy (see <a class="reference internal" href="files.html#files"><span class="std std-ref">Working with files</span></a>). The remaining tasks (listed in the Exercise below) need to be solved before these 4 steps can all be combined into a single function. That function should use the <code class="docutils literal notranslate"><span class="pre">line_to_fields()</span></code> and <code class="docutils literal notranslate"><span class="pre">cast_to_floats()</span></code> functions that we have already written. At which point, job well done!</p>
</div>
</div>
<div class="section" id="exercises">
<h1><span class="section-number">5.41. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline"></a></h1>
<ol class="arabic simple">
<li><p>Using any text file, identify how to read just the first line.</p></li>
<li><p>Identify how to loop over all the lines in a file.</p></li>
<li><p>Identify how you can keep all the results of converting lines into floats.</p></li>
<li><p>Write a function <code class="docutils literal notranslate"><span class="pre">parser()</span></code> that completes the algorithm. You can apply it to the sample data you make up that looks like the above, or use <a class="reference download internal" download="" href="../_downloads/6aba6da96b4efaab82be88ae7a8d8285/numbers.tsv"><code class="xref download docutils literal notranslate"><span class="pre">this</span> <span class="pre">file</span></code></a>.</p></li>
</ol>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="import.html" class="btn btn-neutral float-left" title="5.39. Extending capabilities using import" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="misc.html" class="btn btn-neutral float-right" title="5.42. Miscellaneous Python features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Gavin Huttley.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>